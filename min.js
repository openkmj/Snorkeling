var e=800,t=10,x=(e,a,t)=>Math.max(e,Math.min(a,t)),y=Math.random,i=40,n=1e3,h=e,l=0,p=0,m=0,o=100,d=200,r=0,u=i,f=400,s=0,b=0,w=.3,M=200,k=1,R=[],g=[],q=[],v=e=>c.fillStyle=e,A=c.fillRect.bind(c),F=c.fillText.bind(c),S="splice",T=e=>c.font=e+"px s";a.width=a.height=e,onkeydown=onkeyup=e=>R[e.which]=e.type[5],function a(j){c.clearRect(0,0,e,e),v("blue"),A(0,o,e,700),v("#000"),A(8,8,d+4,24),T(24),F(r,t,55),v("tan"),A(t,t,M,20),k&&(R[38]&&(b-=w),R[i]&&(b+=w),R[37]&&(s-=w),R[39]&&(s+=w),f>o?k=(M-=.01*(j-l))>0:M=x(0,d,M+.2*(j-l)),s=x(-w*t,w*t,.97*s),b=x(-w*t,w*t,.97*b+.04),u=x(0,780,u+s),f=x(o,760,f+b),j-p>n&&(p=j,q.push({x:e,y:560*y()+o})),T(60),q.map(((e,a)=>{u<e.x+i&&u+i>e.x&&f<e.y+i&&f+i>e.y&&(k=0),g.map(((x,c)=>{x.x<e.x+i&&x.x+t>e.x&&x.y<e.y+i&&x.y+t>e.y&&(g[S](c,1),q[S](a,1),r++,n*=.99,L=y(),L<.1?d+=i:L<.2?w*=1.1:L<.3&&(h*=.8))})),F("ðŸŸ",e.x,e.y+i),e.x-=2})),R[32]&&j-m>h&&(m=j,g.push({x:u+i,y:f+20})),v("red"),g.map((e=>A(e.x+=7,e.y,t,t)))),T(i),F(k?"ðŸ¤¿":"ðŸ˜µ",u,f+i),l=j,requestAnimationFrame(a)}(0);